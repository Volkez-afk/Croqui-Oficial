<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Login Servidor | Prefeitura Botucatu</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="supabase.js"></script>
</head>

<body>

<div class="container">
    <h1>Login do Servidor</h1>

    <label>RI</label>
    <input type="text" id="ri">

    <label>Senha</label>
    <input type="password" id="senha">

    <button onclick="loginServidor()">Entrar</button>
</div>

<script>
async function loginServidor(){
    const ri = document.getElementById("ri").value;
    const senha = document.getElementById("senha").value;

    const { data, error } = await supabase
        .from("servidores")
        .select("*")
        .eq("ri", ri)
        .eq("senha", senha)
        .single();

    if(error || !data){
        alert("Servidor n√£o autorizado");
        return;
    }

    sessionStorage.setItem("servidorLogado", JSON.stringify(data));
    window.location.href = "servidor.html";
}
</script>

</body>
</html>
